language: cpp
os: windows
branches:
  only:
    - master
env:
  - MSBUILD_PATH="c:\Program Files (x86)\Microsoft Visual Studio\2017\BuildTools\MSBuild\15.0\Bin"
script:
  - export PATH=$MSBUILD_PATH:$PATH
  - curl -O https://www.asus.com/campaign/aura/download/AuraSDK.zip
  - 7z x AuraSDK.zip -oAuraSDK
  - MSBuild.exe AuraD.sln -t:Clean -t:Build -p:Configuration=CI
  - 7z a -tzip AuraD.zip ./CI/AuraD.exe ./AuraSDK/sdk/AURA_SDK.dll
deploy:
  name: Build $(git describe --abbrev=0)
  api_key: 
    secure: bd2cM9KQAubngslmFtdBuYSOo4LEi7sL67I+2WJt69YTJOHHLMRxXYOLdhqWVh8v2c4kp1apwwcZtNEzDQ+DI4shXKlVnSI1/v4XOFdVZTf3ncXQpYpRAn2+FNtoLLnassphds7ITaXbwOzGgtyKEO2oAuoVp5ZX1BX1CFrO6/QyaVTNOANEuky4ovBUgOLgq0IM7XyDFkJhfxDaF3IMeSuhld/b9XlAUHWWIGOBJ3G5RrhU+YxRcSpwo3/vwTwdaoYpucZHRBZ2A1PJxNOho6R+z1xhRMGVvXcJtW/ufRZg7ON1OqlEIwUlJGTLJ7EgJ0VlNbYWIQKM0mjxFGW5qy4DLkS7bUurXReybnitMR3qsxxolrDdwVkWHdbm5llAg/Szw5iqdw71rFKYBox93Yz66XyNNxR+/FSmn1kA1O65ZFAlN+eTGxJR6P0YMq42cZR0Gx2tfLxCvHLvAyUIQz+UtBw0rJtnVgwLSPjx8FhBGhIHJARoFl1UvcxKJELM3HH1m2FOou9YTJ0t+I8bsbhJeOxmXUAvt0N5ECkqaG67+VxEo/bcSUMELL2l7q/wEeaDdQBlKHQZ2O41HoeCuy785IifFFRBopInzjeYIc9XeJ8PywxX9ud9b51UZXtjHa1nj3ylqUl6U5S8oBBzCudp8aWUWETM9UtObaFNIfg=
  provider: releases
  file:
    - AuraD.zip
  skip_cleanup: true
  on:
    branch: master
